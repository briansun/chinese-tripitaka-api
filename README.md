# API for Chinese Tripitaka (deerpark.app)

[![CBETA version](https://img.shields.io/badge/CBETA-2020Q3-brightgreen.svg)](http://cbeta.org)

[ã€Œæ¼¢æ–‡å¤§è—ç¶“ã€ç¶²ç«™](https://deerpark.app)ç›®å‰æ˜¯ç”±ä¸€å€‹äººåœ¨é–‹ç™¼å’Œç¶­è­·ï¼Œé€²åº¦ä¸æœƒå¤ªå¿«ï¼Œæœ‰ä»»ä½•å»ºè­°æˆ–æ„è¦‹è«‹ç™¼åˆ° brian@xmind.net ã€‚è¬è¬æ”¯æŒï¼ğŸ™

æœå‹™å™¨ç›®å‰æ”¾åœ¨ AWS Tokyoï¼Œé‹ç‡Ÿæˆæœ¬ç”±[ã€ŒXMind è»Ÿä»¶å…¬å¸ã€](https://www.xmind.net)ä¾›é¤Šã€‚ğŸ™

## æ¦‚å¿µ
æœ¬ç«™çš„ API çœ‹èµ·ä¾†æœƒåƒæ˜¯ [CBETA API](https://cbdata.dila.edu.tw/v1.2/) çš„ä¸€å€‹ç°¡åŒ–ç‰ˆæœ¬ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›æ¦‚å¿µï¼š
* workï¼šä¸€éƒ¨ç¶“æˆ–ä¸€éƒ¨è«–ï¼Œæœ‰çš„å¾ˆé•·æœ‰600å·ï¼Œæœ‰çš„åªæœ‰ä¸€å·ã€‚
* juanï¼šä¸€å·ã€‚ä¹Ÿå°±æ˜¯ä¸€å€‹ html æ–‡ä»¶ã€‚
* lbï¼šè¡Œè™Ÿã€‚åœ¨ html æ–‡ä»¶ä¸­ï¼Œæœƒä»¥ `<span class="lineInfo" line="0106c09"></span>` çš„å½¢å¼å‡ºç¾ï¼Œä¸€èˆ¬åªåœ¨æ¯ä¸€æ®µçš„é–‹é ­ã€‚


## All works
å–å›æ‰€æœ‰ä½›ç¶“çš„ meta dataï¼Œç›®å‰æœ‰ 4600+ æ¢ã€‚

### API:
```
GET https://deerpark.app/api/v1/allworks
```

### Sample Response:
é™¤äº† alias/alt ä¹‹å¤–ï¼Œå…¶å®ƒä¿¡æ¯æ˜¯ä¸€å®šæœƒæœ‰çš„ã€‚
```js
[
  {
    "id": "T0001", // åœ¨ CBETA ä¸­çš„ç·¨è™Ÿï¼Œå‰ä¸€å€‹æˆ–å…©å€‹å­—æ¯è¡¨ç¤ºè—ç¶“ï¼Œå…·é«”å¯æŸ¥é–± CBETA æ–‡æª”
    "title": "é•·é˜¿å«ç¶“",
    "byline": "å¾Œç§¦ ä½›é™€è€¶èˆå…±ç«ºä½›å¿µè­¯", // è­¯è€…æˆ–ä½œè€…ï¼Œæœ‰äº›æ˜¯ä¸€äººï¼Œæœ‰äº›æ˜¯å¤šäººï¼Œæœ‰äº›æ˜¯ï¼ˆå¤±ï¼‰
    "juans": [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22], // å¤§éƒ¨åˆ†ç¶“æ˜¯å¾1é–‹å§‹ï¼Œæœ‰æ™‚å€™ä¸æ˜¯
    "chars": 198729, // ç¥›é™¤æ¨™é»ç¬¦è™Ÿå¾Œçš„å­—æ•¸

    // Optional
    "alias": "...", // çŸ­åç¨±ã€‚å¤§éƒ¨åˆ†ç¶“æ²’æœ‰ï¼Œå°‘æ•¸æœ‰ï¼Œå¦‚ã€Œæ³•è¯ç¶“ã€
    "alt": "X0001 xxxxxx" // CBETA å…¶å®ƒç·¨è™Ÿå’Œåç¨±ã€‚å¤§éƒ¨åˆ†ç¶“æ²’æœ‰ï¼Œå°‘æ•¸æœ‰ï¼Œè©³è¦‹ JB277ã€‚App ä¸­ä¸äºˆä»¥é¡¯ç¤ºã€‚
  },
  ...
]
```


## Table of Contents
å–å›æŸéƒ¨ç¶“å…¸çš„ç›®éŒ„

### API:
```
GET https://deerpark.app/api/v1/toc/:id
```

### Sample Request:
```
GET https://deerpark.app/api/v1/toc/T0251
```

### Sample Response:
```js
{ // è¿”å›å…©å€‹éƒ¨åˆ†
  "juans": [ // ç¬¬ä¸€éƒ¨åˆ†æ˜¯åˆ†å·
    {
      "file": "T08n0251", // ç”¨ä¸ä¸Š
      "lb": "0848c04",
      "juan": 1,
      "title": "ç¬¬ä¸€"
    }
  ],
  "mulu": [ //ç¬¬äºŒéƒ¨åˆ†æ˜¯ç›®éŒ„
    {
      "indent": 1, // ç¸®é€²ï¼Œ1è¡¨ç¤ºç¬¬ä¸€ç´šï¼Œæ²’æœ‰0
      "title": "å¤§æ˜å¤ªç¥–é«˜çš‡å¸å¾¡è£½åº",
      "juan": 1,
      "lb": "0848a03" // è¡Œè™Ÿ
    },
    {
      "indent": 1,
      "title": "èˆ¬è‹¥æ³¢ç¾…èœœå¤šå¿ƒç¶“åº",
      "juan": 1,
      "lb": "0848b19"
    }
  ]
}
```


## Article in html
å–å›æŸå·ç¶“æ–‡çš„ html ç‰ˆæœ¬ã€‚å…¶ä¸­æœ‰å°‘é‡çš„ç¶“æ–‡å¸¶åœ–ç‰‡ï¼Œåœ–ç‰‡æ˜¯ä»¥ [Data URI](https://en.wikipedia.org/wiki/Data_URI_scheme) çš„å½¢å¼æ”¾åœ¨ html è£¡çš„ã€‚

### API:
ä¸å¸¶å·è™Ÿçš„ url æœƒè‡ªå‹•è½‰å‘ç‚ºè©²ç¶“çš„ç¬¬ä¸€å·ï¼Œå¦‚æœæ²’æœ‰ç¬¬ä¸€å·å°±å¾€å¾Œéæ¨ã€‚
```
GET https://deerpark.app/api/v1/html/:id
GET https://deerpark.app/api/v1/html/:id/:juan
```

### Sample Request:
```
GET https://deerpark.app/api/v1/html/T0251
GET https://deerpark.app/api/v1/html/T0251/1
```

### Sample Response:
```html
<!doctype html>
<html lang="zh-TW">
<meta charset=utf-8>
...
<title>èˆ¬è‹¥æ³¢ç¾…èœœå¤šå¿ƒç¶“</title>

<article>
...
</article>

</html>
```


## Download pdf/epub/mobi
æœ€æ–°æ›´æ–°ï¼špdf/epub/mobi å·²å…¨éƒ¨æ›´æ–°ç‚ºæœ€æ–°ç‰ˆã€‚ä»Šå¾Œæ‡‰è©²èƒ½èˆ‡ html ä¿æŒç‰ˆæœ¬ä¸€è‡´ã€‚

### API:
```
GET https://deerpark.app/api/v1/download/:type/:id
```

CBETA æä¾›äº†ä¸‰ç¨®æ ¼å¼çš„æ–‡ä»¶ä¸‹è¼‰ï¼Œåˆ†åˆ¥æ˜¯ï¼š
* PDF ï¼ˆé©åˆ A4 é¢å¹…æ‰“å°ï¼‰
* epub ï¼ˆé–‹æ”¾æ ¼å¼ï¼Œé©åˆæ‰€æœ‰ epub é–±è®€å™¨ï¼Œå¦‚ Apple Booksï¼‰
* mobi ï¼ˆé©åˆ Kindle é–±è®€ï¼‰

### Sample Request:
```
GET https://deerpark.app/api/v1/download/pdf/T0945
GET https://deerpark.app/api/v1/download/epub/T0945
GET https://deerpark.app/api/v1/download/mobi/T0945
```


## Full Text Search ï¼ˆåœ¨æ‰€æœ‰ç¶“ä¸­æœç´¢ï¼‰
æœç´¢çµæœæœ€å¤šè¿”å› 100 å€‹ worksï¼Œç„¡åˆ†é åŠŸèƒ½ï¼Œæ‰€ä»¥è¶…é 100 å€‹æ™‚ï¼Œè«‹å¢åŠ æœç´¢è©ã€‚

### API:
```
GET https://deerpark.app/api/v1/fts/works/:term
```

### Sample Request:
```
GET https://deerpark.app/api/v1/fts/works/ä¸€åˆ‡æœ‰ä¸ºæ³•
```

### Sample Response:
è«‹æ³¨æ„ï¼Œé€™è£¡æ²’æœ‰è¿”å›ä¸Šä¸‹æ–‡ï¼Œåªè¿”å›äº†è©²é—œéµè©åœ¨æ¯éƒ¨ç¶“ä¸­å‡ºç¾å¤šå°‘æ¬¡ã€‚æŒ‰æ¬¡æ•¸æ’åºã€‚
```js
{
  "found": 864, // ä¸€å…±æœ‰å¤šå°‘çµæœï¼Œå–®ä½æ˜¯ã€Œè™•ã€è€Œä¸æ˜¯ã€Œç¶“ã€
  "works": [ // å‡ºç¾æ¬¡æ•¸æœ€å¤šçš„ 100 éƒ¨ç¶“
    {
      "search_results": 56, // é—œéµè©åœ¨æœ¬ç¶“å‡ºç¾çš„æ¬¡æ•¸

      // ä»¥ä¸‹æ˜¯æœ¬ç¶“çš„åŸºæœ¬ä¿¡æ¯
      "id": "T1509",
      "title": "å¤§æ™ºåº¦è«–",
      "byline": "é¾æ¨¹è©è–©é€  å¾Œç§¦ é³©æ‘©ç¾…ä»€è­¯",
      "juans": [1,2,3,4,5,6,7,8,9,10......],
      "chars": 956053
    },
    ...
  ]
}
```


## Full Text Search ï¼ˆåœ¨ä¸€éƒ¨ç¶“ä¸­æœç´¢ï¼‰
æœç´¢çµæœæœ€å¤šè¿”å› 100 å€‹ resultsï¼Œç„¡åˆ†é åŠŸèƒ½ï¼Œæ‰€ä»¥è¶…é 100 å€‹æ™‚ï¼Œè«‹å¢åŠ æœç´¢è©ã€‚

### API:
```
GET https://deerpark.app/api/v1/fts/:id/:term
```

### Sample Request:
```
https://deerpark.app/api/v1/fts/T0220/ä¸€åˆ‡æœ‰ä¸ºæ³•
```

### Sample Response:
```js
{
  "found": 6, // ä¸€å…±æœ‰å¤šå°‘çµæœ
  "results": [ // æœ€å¤š 100 å€‹çµæœï¼ŒæŒ‰å‡ºç¾é †åºæ’åº
    {
      "juan": 69, // ç¬¬å¹¾å·
      "lb": "0391a15", // è¡Œè™Ÿ
      "paragraph": "...éå£ã€‚ä½•ä»¥æ•…ï¼Ÿæœ¬æ€§çˆ¾æ•…ã€‚ä¸€åˆ‡æœ‰æ¼æ³•éå¸¸éå£ã€‚ä½•ä»¥æ•…ï¼Ÿæœ¬æ€§çˆ¾æ•…ã€‚ä¸€åˆ‡ç„¡æ¼æ³•éå¸¸éå£ã€‚ä½•ä»¥æ•…ï¼Ÿæœ¬æ€§çˆ¾æ•…ã€‚<mark>ä¸€åˆ‡æœ‰ç‚ºæ³•</mark>éå¸¸éå£ã€‚ä½•ä»¥æ•…ï¼Ÿæœ¬æ€§çˆ¾æ•…ã€‚ä¸€åˆ‡ç„¡ç‚ºæ³•éå¸¸éå£ã€‚ä½•ä»¥æ•…ï¼Ÿæœ¬æ€§çˆ¾æ•…ã€‚èˆåˆ©å­ï¼ç”±æ­¤ç·£æ•…æˆ‘ä½œæ˜¯èªªï¼šè«¸æ³•äº¦çˆ¾..." // ä¸Šä¸‹æ–‡ï¼Œé—œéµè©ç”¨ <mark> æ¨™å‡ºï¼Œç„¡å…¶å®ƒ html tag
    },
    ...
  ]
}
```


## Reading lists

### API:
```
GET https://deerpark.app/api/v1/readinglist/:name
```

ç›®å‰å·²æœ‰ 4 å€‹ reading listï¼Œåˆ†åˆ¥æ˜¯ï¼š
* é¦–é å¸¸ç”¨ç¶“å…¸ï¼ˆhomeï¼‰
* æ›´å¤šå¸¸ç”¨ç¶“å…¸ï¼ˆfamousï¼‰
* ç¦åš´ç²¾èˆä¸‰å¹´é–±ç¶“ç›®éŒ„ï¼ˆfuyanï¼‰
* å°é †æ³•å¸«ä½›å­¸è‘—ä½œé›†ï¼ˆyinshunï¼‰

### é–±è®€åˆ—è¡¨æœ‰å…©ç¨®æ ¼å¼ï¼š
1) ä¸€ç¨®æ˜¯æ•¸çµ„ï¼Œæ•¸çµ„ä¸­çš„æ¯å€‹å…ƒç´ æ˜¯ä¸€æ¢æ•¸æ“šã€‚å¤šæ•¸åˆ—è¡¨æ˜¯é€™ç¨®æ ¼å¼ã€‚
```js
{ "items": [...] }
```
2) å¦ä¸€ç¨®æ˜¯åˆ† categoryï¼Œæ¯å€‹ category æ˜¯ä¸€å€‹æ•¸çµ„ã€‚ç›®å‰åªæœ‰ã€Œç¦åš´ç²¾èˆä¸‰å¹´é–±ç¶“ç›®éŒ„ã€æ˜¯é€™ç¨®æ ¼å¼ã€‚
```js
{ 
  "items": [
    { 
      "title":"ç¬¬ä¸€å¹´Â·ç”²",
      "type": "category",
      "items":[...]
    },
    ...
  ]
}
```

### å–®æ¢æ•¸æ“šæœ‰ä¸‰ç¨®æ ¼å¼ï¼š
1) æ•´éƒ¨ç¶“å…¸ã€‚è·Ÿ allworks ä¸­çš„æ ¼å¼ä¸€æ¨£ã€‚
```js
{
  "id": "T0784",
  "title": "å››åäºŒç« ç¶“",
  "byline": "å¾Œæ¼¢ è¿¦è‘‰æ‘©é¨°å…±æ³•è˜­è­¯",
  "juans": [1],
  "chars": 2495
}
```
2) æŸéƒ¨ç¶“å…¸ä¸­çš„ä¸€éƒ¨åˆ†ã€‚
```js
{
  "special": true,
  "title": "è¯åš´ç¶“ ååœ°å“",
  "byline": [ // ä¸åŒæ–¼å…¶å®ƒåœ°æ–¹ï¼Œé€™è£¡çš„ byline æ˜¯å€‹æ•¸çµ„
    "å¤§æ–¹å»£ä½›è¯åš´ç¶“ (å…«åè¯åš´)",
    "å” å¯¦å‰é›£é™€è­¯",
    "CBETA T0279",
    "ç¬¬34ï½39å·"
  ],
  "target": "T0279/34"
}
```
3) å¤–éƒ¨ç¶²ç«™é€£çµã€‚
```js
{
  "special": true,
  "external": true,
  "title": "å­¸ä½›è¡Œå„€",
  "byline": "å–„å› æ³•å¸«è¿° | å¤–éƒ¨ç¶²ç«™",
  "target": "https://jnbooks.cn/search/å­¸ä½›è¡Œå„€"
}
```


### Sample Request:
```
GET https://deerpark.app/api/v1/readinglist/home
GET https://deerpark.app/api/v1/readinglist/famous
GET https://deerpark.app/api/v1/readinglist/fuyan
GET https://deerpark.app/api/v1/readinglist/yinshun
```

### Sample Response (home):
```js
{
  "items": [
    {
      "id": "T0784",
      "title": "å››åäºŒç« ç¶“",
      "byline": "å¾Œæ¼¢ è¿¦è‘‰æ‘©é¨°å…±æ³•è˜­è­¯",
      "juans": [1],
      "juan": 1,
      "chars": 2495
    },
    ...
  ]
}
```

# API for Buddhist Dictionary

æ–°å¢ä½›å­¸è¾­å…¸ APIï¼Œå…§å«äº”éƒ¨è¾­å…¸ï¼Œåˆ†åˆ¥æ˜¯ã€Šé™³ç¾©å­ä½›å­¸å¸¸è¦‹è¾­å½™ã€‹ï¼Œã€Šæ³•ç›¸è¾­å…¸ã€‹ï¼Œã€Šä¸‰è—æ³•æ•¸ã€‹ï¼Œã€Šä¸ç¦ä¿ä½›å­¸å¤§è¾­å…¸ã€‹ï¼Œã€Šä½›å…‰å¤§è¾­å…¸ã€‹ã€‚

## Search Suggestion

### API:
```
GET https://deerpark.app/api/v1/dict/suggest/:term
```

### Sample Request:
å¦‚æœç”¨æˆ¶è¼¸å…¥çš„æ˜¯ç°¡é«”å­—ï¼ŒAPI æœƒè‡ªå‹•è½‰ç‚ºç¹é«”ã€‚å¦‚æœè©²ç°¡é«”å°æ‡‰å¤šå€‹ç¹é«”ï¼Œæˆ‘å€‘æœƒç›¡é‡ä¿è­‰å¤šå€‹ç‰ˆæœ¬éƒ½æœ‰æ•ˆã€‚

```
GET https://deerpark.app/api/v1/dict/suggest/å¦‚ä¾†è—
```

æœ€å¥½åœ¨è«‹æ±‚çš„é—œéµè©ä¸­ï¼Œåªå‡ºç¾ä¸­æ–‡ï¼Œä¸å‡ºç¾è¥¿æ–‡å­—ç¬¦ã€‚ (Best Practice)

### Sample Response:
é¦–å…ˆå‡ºç¾åœ¨çµæœä¸­çš„ï¼Œæ˜¯å’Œé—œéµè©ä¸€æ¨¡ä¸€æ¨£çš„è©æ¢ï¼Œå…¶æ¬¡æ˜¯ä»¥é—œéµè©ç‚ºé¦–çš„è©æ¢ï¼Œæœ€å¾Œæ˜¯åŒ…å«é—œéµè©çš„è©æ¢ã€‚æœ€å¤šè¿”å› 50 å€‹çµæœã€‚

```js
[
  "å¦‚ä¾†è—",
  "å¦‚ä¾†è—å¿ƒ",
  "å¦‚ä¾†è—ç·£èµ·",
  "å¦‚ä¾†è—æ€§",
  "å¦‚ä¾†è—ç¶“",
  "å¦‚ä¾†è—ç¶“åå–»",
  "å¦‚ä¾†è—è«–",
  "ä¸€åˆ‡æœ‰æƒ…æ˜¯å¦‚ä¾†è—ç­‰",
  "ä¸‰å¦‚ä¾†è—",
  "ä¸ç©ºå¦‚ä¾†è—",
  "ä¹å–»â”€â”€å¦‚ä¾†è—ä¹å–»",
  "äºŒå¦‚ä¾†è—",
  "ç©ºå¦‚ä¾†è—",
  "å¤§æ–¹å»£å¦‚ä¾†è—ç¶“",
  "å¤§æ–¹ç­‰å¦‚ä¾†è—ç¶“",
  "åç¨®å¦‚ä¾†è—",
  "éš±æ²’å¦‚ä¾†è—"
]
```

## Lookup

### API:
```
GET https://deerpark.app/api/v1/dict/lookup/:term
```
ï¼ˆPS. åœ¨å°¾éƒ¨åŠ  `?html` å¯ä»¥å¾—åˆ°ç°¡æ˜“ç‰ˆç¶²é ï¼‰

### Sample Request:
æ³¨æ„ï¼šæœç´¢è©å¿…é ˆæ˜¯ç²¾ç¢ºçš„ï¼Œå¦å‰‡æœƒ 404ã€‚é€™è£¡ä¸æä¾›ç°¡ç¹è½‰æ›ã€‚æ‰€ä»¥æœ€å¥½ä½¿ç”¨ä¸Šé¢ Search Suggestion API æä¾›çš„çµæœã€‚

```
GET https://deerpark.app/api/v1/dict/lookup/å¦‚ä¾†è—
```

### Sample Response:
```js
{
    "word": "å¦‚ä¾†è—", // æœç´¢è©
    "data": [ // ä¸è¶…é 5 å€‹çµæœï¼Œå› ç‚ºåªæœ‰äº”éƒ¨è¾­å…¸ï¼Œè«‹å‹¿ä¾è³´å…¶é †åº
        {
            "dictid": 0,
            "dict": "é™³ç¾©å­ä½›å­¸å¸¸è¦‹è¾­å½™", // è¾­å…¸åç¨±
            "expl": "<p>çœŸå¦‚åœ¨ç…©æƒ±ä¸­ï¼Œæ”è—å¦‚ä¾†ä¸€åˆ‡æœåœ°ä¸Šçš„åŠŸå¾·ï¼Œåå¦‚ä¾†è—ï¼Œè‹¥å‡ºäº†ç…©æƒ±ï¼Œå³åæ³•èº«ã€‚</p>"
        },
        ...
    ]
}
```
å¦‚æœ dictid = 3 ï¼ˆä¸ç¦ä¿ä½›å­¸å¤§è¾­å…¸ï¼‰ï¼Œexpl å¯èƒ½æœƒå‡ºç¾ hyperlinkï¼Œä¾‹å¦‚ï¼š
* `<a href="/dict/å¦‚ä¾†è—">å¦‚ä¾†è—</a>` 
